# QE Agent v3 - Hierarchical Multi-Agent System

LangGraph ê¸°ë°˜ì˜ **ê³„ì¸µí˜• ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ**ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ê²€ìƒ‰, ìë™í™” ì½”ë“œ ìƒì„±, ë¦¬ì†ŒìŠ¤ ê²€ìƒ‰ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨
- [ê°œìš”](#ê°œìš”)
- [ì£¼ìš” íŠ¹ì§•](#ì£¼ìš”-íŠ¹ì§•)
- [ì„¤ì¹˜ ë°©ë²•](#ì„¤ì¹˜-ë°©ë²•)
- [ë¹ ë¥¸ ì‹œì‘](#ë¹ ë¥¸-ì‹œì‘)
- [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
- [ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬](#ì‚¬ìš©-ê°€ëŠ¥í•œ-ë„êµ¬)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì‚¬ìš© ì˜ˆì‹œ](#ì‚¬ìš©-ì˜ˆì‹œ)

---

## ê°œìš”

QE Agent v3ëŠ” **3ë‹¨ê³„ ê³„ì¸µí˜• ë©€í‹° ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜**ë¥¼ êµ¬í˜„í•œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ìµœìƒìœ„ Supervisor Agentê°€ ë„ë©”ì¸ë³„ Supervisor Agentë¥¼ ì¡°ìœ¨í•˜ê³ , ê° Domain SupervisorëŠ” ì „ë¬¸í™”ëœ Worker Agentë¥¼ ê´€ë¦¬í•˜ì—¬ ë³µì¡í•œ ì‘ì—…ì„ ì²´ê³„ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•

- **ğŸ—ï¸ 3ë‹¨ê³„ ê³„ì¸µ êµ¬ì¡°**: Supervisor â†’ Domain Supervisors â†’ Worker Agents
- **ğŸ¯ ë„ë©”ì¸ ì „ë¬¸í™”**: TestCase, Resource, CodeReview ë„ë©”ì¸ë³„ ê´€ë¦¬
- **ğŸ”„ ReAct íŒ¨í„´**: Worker AgentëŠ” create_react_agentë¡œ êµ¬í˜„
- **âœ… ë‹¨ê³„ë³„ ê²€ì¦**: ê° ë ˆì´ì–´ì—ì„œ ê²°ê³¼ë¥¼ í‰ê°€í•˜ì—¬ ë‹¤ìŒ ë‹¨ê³„ ê²°ì •
- **ğŸ›¡ï¸ íƒ€ì… ì•ˆì „ì„±**: Pydantic ëª¨ë¸ ê¸°ë°˜ íŒŒë¼ë¯¸í„° ê²€ì¦
- **ğŸ’¾ ì²´í¬í¬ì¸íŠ¸**: SQLite ê¸°ë°˜ ëŒ€í™” ì´ë ¥ ì €ì¥ ë° ë³µêµ¬

---

## ì£¼ìš” íŠ¹ì§•

### 1. 3ë‹¨ê³„ ê³„ì¸µí˜• ì•„í‚¤í…ì²˜

```
Layer 1 (ìµœìƒìœ„)
  â””â”€ Supervisor Agent
      â”œâ”€ ë„ë©”ì¸ ë¼ìš°íŒ… (testcase/resource/review)
      â””â”€ ìµœì¢… ê²°ê³¼ í†µí•©

Layer 2 (ë„ë©”ì¸ ê°ë…)
  â”œâ”€ TestCase Supervisor Agent
  â”‚   â””â”€ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ê²€ìƒ‰ â†’ ë©”ì„œë“œ ìƒì„± â†’ í‰ê°€
  â”œâ”€ Resource Supervisor Agent
  â”‚   â””â”€ íŒŒì¼ íƒìƒ‰ â†’ ì½”ë“œ ê²€ìƒ‰ â†’ í‰ê°€
  â””â”€ CodeReview Supervisor Agent
      â””â”€ ì½”ë“œ ë¶„ì„ â†’ ë¦¬ë·° â†’ í‰ê°€

Layer 3 (ì‹¤í–‰)
  â””â”€ Worker Agents (create_react_agent)
      â”œâ”€ testcase_search_agent
      â”œâ”€ testcase_create_method_agent
      â”œâ”€ finder_agent
      â”œâ”€ searcher_agent
      â””â”€ evaluator_agent (ê° ë„ë©”ì¸ë³„)
```

### 2. ë„ë©”ì¸ë³„ ì „ë¬¸í™”

#### TestCase Domain
- **testcase_search_agent**: ChromaDB VectorStoreì—ì„œ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ê²€ìƒ‰
- **testcase_create_method_agent**: ê²€ìƒ‰ ê²°ê³¼ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì½”ë“œ ìƒì„±
- **testcase_method_evaluator**: ìƒì„±ëœ ì½”ë“œì˜ í’ˆì§ˆ í‰ê°€

#### Resource Domain
- **finder_agent**: íŒŒì¼ëª…/í´ë” íŒ¨í„´ ê²€ìƒ‰ (glob)
- **searcher_agent**: íŒŒì¼ ë‚´ìš© ê²€ìƒ‰ (grep, read_file)
- **evaluator_agent**: ê²€ìƒ‰ ê²°ê³¼ì˜ ê´€ë ¨ì„± í‰ê°€

#### CodeReview Domain
- **review_agent**: ì½”ë“œ ë¶„ì„ ë° ë¦¬ë·°
- **suggestion_agent**: ê°œì„  ì œì•ˆ
- **evaluator_agent**: ë¦¬ë·° í’ˆì§ˆ í‰ê°€

### 3. ë‹¨ê³„ë³„ ê²€ì¦ ë©”ì»¤ë‹ˆì¦˜

ê° Domain SupervisorëŠ” Worker Agent ì‹¤í–‰ í›„ ê²°ê³¼ë¥¼ í‰ê°€:
- âœ… **ì„±ê³µ**: ë‹¤ìŒ Worker Agentë¡œ ì§„í–‰
- âš ï¸ **ì¬ì‹œë„ í•„ìš”**: ì´ì „ Agent ì¬ì‹¤í–‰
- âŒ **ì‹¤íŒ¨**: Supervisor Agentì— ì˜¤ë¥˜ ë³´ê³ 

### 4. ReAct íŒ¨í„´ ì ìš© (Worker Agent)

Worker AgentëŠ” LangGraphì˜ `create_react_agent`ë¥¼ ì‚¬ìš©:
```python
from langgraph.prebuilt import create_react_agent

def create_search_agent():
    llm = create_llm(temperature=0.0)
    tools = [search_testcase_vectordb, parse_testcase_fields]
    return create_react_agent(
        llm,
        tools,
        state_modifier="You are a TestCase Search Agent..."
    )
```

---

## ì„¤ì¹˜ ë°©ë²•

### 1. í™˜ê²½ ìš”êµ¬ì‚¬í•­

- Python 3.10+
- LangChain ë° LangGraph
- OpenAI-compatible LLM (LM Studio, OpenAI API ë“±)
- ChromaDB (í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ VectorStore)

### 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd QE_Agent

# 2. ê°€ìƒí™˜ê²½ ìƒì„± (ê¶Œì¥)
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  LLM API ì„¤ì •ì„ ì…ë ¥í•©ë‹ˆë‹¤:

```bash
# OpenAI API ì‚¬ìš© ì‹œ
OPENAI_API_KEY=your_api_key_here

# ë˜ëŠ” LM Studio ë“± ë¡œì»¬ LLM ì‚¬ìš© ì‹œ
OPENAI_API_BASE=http://127.0.0.1:1234/v1
OPENAI_API_KEY=not-needed

# Temperature ì„¤ì •
TEMPERATURE_CODE=0.1      # ì½”ë“œ ìƒì„±ìš© (ì •í™•ì„±)
TEMPERATURE_SEARCH=0.7    # ê²€ìƒ‰/ë¶„ì„ìš© (ë‹¤ì–‘ì„±)
TEMPERATURE_DEFAULT=0.5   # ê¸°ë³¸ê°’

# Checkpoint ê²½ë¡œ
CHECKPOINT_PATH=checkpoints/checkpoints.db
```

---

## ë¹ ë¥¸ ì‹œì‘

### ê¸°ë³¸ ì‚¬ìš© ì˜ˆì œ

```python
from src.main import graph
from langgraph.checkpoint.sqlite import SqliteSaver

# Checkpoint ìƒì„±
checkpoint_conn = SqliteSaver.from_conn_string("checkpoints/checkpoints.db")

# ì¿¼ë¦¬ ì‹¤í–‰
config = {"configurable": {"thread_id": "user-1"}}
result = graph.invoke(
    {"messages": [("user", "COMMONR-30 ìŠ¤í… 4ë²ˆ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì°¾ì•„ì„œ test ë©”ì„œë“œ ë§Œë“¤ì–´ì¤˜")]},
    config
)

# ê²°ê³¼ í™•ì¸
for msg in result["messages"]:
    if msg.type == "ai" and msg.content:
        print(msg.content)
```

### ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œ

```python
# ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í™•ì¸
for event in graph.stream(
    {"messages": [("user", "demo/test í´ë”ì—ì„œ testCOMMONR_*.py íŒŒì¼ ì°¾ì•„ì¤˜")]},
    config,
    stream_mode="values"
):
    last_message = event["messages"][-1]
    if hasattr(last_message, "content") and last_message.content:
        print(f"ì§„í–‰: {last_message.content[:100]}...")
```

### CLI ëª¨ë“œ ì‹¤í–‰

```bash
# main.pyë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ë©´ ëŒ€í™”í˜• ëª¨ë“œ ì‹œì‘
python -m src.main

# ëª…ë ¹ì–´
# /clear - ëŒ€í™” ì´ˆê¸°í™”
# /exit  - ì¢…ë£Œ
```

---

## ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ì¿¼ë¦¬                               â”‚
â”‚              "COMMONR-30 ìŠ¤í… 4ë²ˆ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ë§Œë“¤ì–´ì¤˜"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Layer 1: Supervisor Agent                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ ì¿¼ë¦¬ ë¶„ì„: "í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ + ì½”ë“œ ìƒì„± ì‘ì—…"              â”‚   â”‚
â”‚  â”‚ â€¢ ë„ë©”ì¸ ê²°ì •: "testcase"                                 â”‚   â”‚
â”‚  â”‚ â€¢ ë¼ìš°íŒ…: TestCase Supervisor Agent í˜¸ì¶œ                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Layer 2: TestCase Supervisor Agent                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Step 1: testcase_search_agent ì‹¤í–‰                        â”‚   â”‚
â”‚  â”‚   â†’ ê²€ìƒ‰ ê²°ê³¼ í‰ê°€: "COMMONR-30 ìŠ¤í… 4ë²ˆ ì°¾ìŒ" âœ…         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Step 2: testcase_create_method_agent ì‹¤í–‰                 â”‚   â”‚
â”‚  â”‚   â†’ ì½”ë“œ í‰ê°€: "ë¬¸ë²• ì •í™•, êµ¬ì¡° ì˜¬ë°”ë¦„" âœ…                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Step 3: testcase_method_evaluator ì‹¤í–‰                    â”‚   â”‚
â”‚  â”‚   â†’ ìµœì¢… í‰ê°€: "í…ŒìŠ¤íŠ¸ ê°€ëŠ¥, ì»¤ë²„ë¦¬ì§€ ì¶©ë¶„" âœ…            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Layer 3: Worker Agents (ReAct)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ testcase_search_agent                                       â”‚ â”‚
â”‚  â”‚   Tools: [search_testcase_vectordb, parse_testcase_fields] â”‚ â”‚
â”‚  â”‚   ReAct: Perception â†’ Reasoning â†’ Action â†’ Observation     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ testcase_create_method_agent                                â”‚ â”‚
â”‚  â”‚   Tools: [generate_test_method, validate_python_code]      â”‚ â”‚
â”‚  â”‚   ReAct: Perception â†’ Reasoning â†’ Action â†’ Observation     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ testcase_method_evaluator                                   â”‚ â”‚
â”‚  â”‚   Tools: [check_syntax, check_coverage, check_structure]   â”‚ â”‚
â”‚  â”‚   ReAct: Perception â†’ Reasoning â†’ Action â†’ Observation     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‹¤í–‰ íë¦„

1. **ì‚¬ìš©ì ì¿¼ë¦¬** â†’ Supervisor Agent
2. **Supervisor Agent**:
   - ì¿¼ë¦¬ ë¶„ì„ ë° ë„ë©”ì¸ ê²°ì • (testcase/resource/review)
   - í•´ë‹¹ Domain Supervisor í˜¸ì¶œ
3. **Domain Supervisor** (ì˜ˆ: TestCase Supervisor):
   - Worker Agent 1 ì‹¤í–‰ â†’ ê²°ê³¼ í‰ê°€ â†’ ë‹¤ìŒ Agent ê²°ì •
   - Worker Agent 2 ì‹¤í–‰ â†’ ê²°ê³¼ í‰ê°€ â†’ ë‹¤ìŒ Agent ê²°ì •
   - Worker Agent 3 ì‹¤í–‰ â†’ ìµœì¢… í‰ê°€
4. **Worker Agents** (ReAct íŒ¨í„´):
   - Tool í˜¸ì¶œ ë° ê²°ê³¼ í•´ì„
   - í•„ìš” ì‹œ ì¶”ê°€ Tool í˜¸ì¶œ (ë°˜ë³µ)
5. **ê²°ê³¼ í†µí•©** â†’ Supervisor Agent â†’ ì‚¬ìš©ì ì‘ë‹µ

---

## ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬

### TestCase ë„ë©”ì¸

#### 1. search_testcase_vectordb - í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ê²€ìƒ‰
ChromaDB VectorStoreì—ì„œ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.

```python
# ì˜ˆì‹œ ì‚¬ìš©
search_testcase_vectordb(
    query="COMMONR-30 ìŠ¤í… 4ë²ˆ",
    query_type="single",
    issue_key="COMMONR-30",
    step_number=4
)
```

**íŒŒë¼ë¯¸í„°:**
- `query` (í•„ìˆ˜): ê²€ìƒ‰ ì¿¼ë¦¬
- `query_type`: "single" (ë‹¨ì¼), "multiple" (ë‹¤ì¤‘), "feature" (ê¸°ëŠ¥ ê¸°ë°˜)
- `issue_key`: JIRA ì´ìŠˆ í‚¤ (ì˜ˆ: "COMMONR-30")
- `step_number`: ìŠ¤í… ë²ˆí˜¸ (single íƒ€ì…ì—ì„œ í•„ìš”)
- `top_k` (ê¸°ë³¸: 5): ìµœëŒ€ ê²°ê³¼ ìˆ˜
- `score_threshold` (ê¸°ë³¸: 0.5): ìµœì†Œ ìœ ì‚¬ë„ ì ìˆ˜

#### 2. generate_test_method - í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ìƒì„±
ê²€ìƒ‰ëœ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ Python í…ŒìŠ¤íŠ¸ ë©”ì„œë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

#### 3. validate_python_code - ì½”ë“œ ê²€ì¦
ìƒì„±ëœ ì½”ë“œì˜ ë¬¸ë²• ë° êµ¬ì¡°ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.

### Resource ë„ë©”ì¸

#### 1. glob - íŒŒì¼/í´ë” íŒ¨í„´ ê²€ìƒ‰
íŒŒì¼ëª… íŒ¨í„´ìœ¼ë¡œ íŒŒì¼ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.

```python
# ì˜ˆì‹œ ì‚¬ìš©
glob(pattern="testCOMMONR_*.py", path="demo/test", file_type="py")
```

**íŒŒë¼ë¯¸í„°:**
- `pattern` (í•„ìˆ˜): ê²€ìƒ‰ íŒ¨í„´ (ì˜ˆ: "*.py", "test*")
- `path` (ê¸°ë³¸: "."): ê²€ìƒ‰ ê²½ë¡œ
- `file_type` (ì„ íƒ): íŒŒì¼ íƒ€ì… í•„í„°
- `head_limit` (ê¸°ë³¸: 100): ìµœëŒ€ ê²°ê³¼ ê°œìˆ˜

#### 2. read_file - íŒŒì¼ ë‚´ìš© ì½ê¸°
íŒŒì¼ ë‚´ìš©ì„ ì½ìŠµë‹ˆë‹¤.

```python
# ì˜ˆì‹œ ì‚¬ìš©
read_file(file_path="src/main.py", offset=0, limit=50)
```

**íŒŒë¼ë¯¸í„°:**
- `file_path` (í•„ìˆ˜): íŒŒì¼ ê²½ë¡œ
- `offset` (ê¸°ë³¸: 0): ì‹œì‘ ë¼ì¸
- `limit` (ì„ íƒ): ì½ì„ ë¼ì¸ ìˆ˜

#### 3. grep - íŒŒì¼ ë‚´ìš© ê²€ìƒ‰
íŠ¹ì • í…ìŠ¤íŠ¸/íŒ¨í„´ì´ í¬í•¨ëœ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.

```python
# ì˜ˆì‹œ ì‚¬ìš©
grep(pattern="class Test", path=".", file_type="py")
```

**íŒŒë¼ë¯¸í„°:**
- `pattern` (í•„ìˆ˜): ê²€ìƒ‰ íŒ¨í„´ (ì •ê·œì‹)
- `path` (ê¸°ë³¸: "."): ê²€ìƒ‰ ê²½ë¡œ
- `file_type` (ì„ íƒ): íŒŒì¼ íƒ€ì… í•„í„°
- `case_insensitive` (ê¸°ë³¸: False): ëŒ€ì†Œë¬¸ì ë¬´ì‹œ

#### 4. analyze_structure - ë””ë ‰í† ë¦¬ êµ¬ì¡° ë¶„ì„
í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.

```python
# ì˜ˆì‹œ ì‚¬ìš©
analyze_structure(directory="demo", max_depth=3)
```

#### 5. bash - Bash ëª…ë ¹ì–´ ì‹¤í–‰
ë³µì¡í•œ ê²€ìƒ‰ì´ë‚˜ ì‹œìŠ¤í…œ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
QE_Agent/
â”œâ”€â”€ ARCHITECTURE.md              # ìƒì„¸ ì•„í‚¤í…ì²˜ ë¬¸ì„œ (v3)
â”œâ”€â”€ README.md                    # ì´ ë¬¸ì„œ
â”œâ”€â”€ requirements.txt             # Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.py                  # ë©”ì¸ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ config.py                # LLM ë° VectorStore ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/                  # ì—ì´ì „íŠ¸ êµ¬í˜„
â”‚   â”‚   â”œâ”€â”€ supervisor_agent.py          # Layer 1: ìµœìƒìœ„ Supervisor
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ testcase/                    # TestCase Domain
â”‚   â”‚   â”‚   â”œâ”€â”€ testcase_supervisor.py   # Layer 2: TestCase Supervisor
â”‚   â”‚   â”‚   â”œâ”€â”€ search_agent.py          # Layer 3: ê²€ìƒ‰ Worker
â”‚   â”‚   â”‚   â”œâ”€â”€ create_method_agent.py   # Layer 3: ì½”ë“œ ìƒì„± Worker
â”‚   â”‚   â”‚   â””â”€â”€ evaluator_agent.py       # Layer 3: í‰ê°€ Worker
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ resource/                    # Resource Domain
â”‚   â”‚   â”‚   â”œâ”€â”€ resource_supervisor.py   # Layer 2: Resource Supervisor
â”‚   â”‚   â”‚   â”œâ”€â”€ finder_agent.py          # Layer 3: íŒŒì¼ ê²€ìƒ‰ Worker
â”‚   â”‚   â”‚   â”œâ”€â”€ searcher_agent.py        # Layer 3: ë‚´ìš© ê²€ìƒ‰ Worker
â”‚   â”‚   â”‚   â””â”€â”€ evaluator_agent.py       # Layer 3: í‰ê°€ Worker
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ code_review/                 # CodeReview Domain
â”‚   â”‚       â”œâ”€â”€ review_supervisor.py     # Layer 2: Review Supervisor
â”‚   â”‚       â””â”€â”€ ... (ë¦¬ë·° ê´€ë ¨ Worker Agents)
â”‚   â”‚
â”‚   â”œâ”€â”€ state/                   # ìƒíƒœ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ supervisor_state.py  # Layer 1 State
â”‚   â”‚   â”œâ”€â”€ testcase_state.py    # TestCase Domain State
â”‚   â”‚   â”œâ”€â”€ resource_state.py    # Resource Domain State
â”‚   â”‚   â””â”€â”€ review_state.py      # Review Domain State
â”‚   â”‚
â”‚   â””â”€â”€ tools/                   # Tool êµ¬í˜„
â”‚       â”œâ”€â”€ tool_models.py       # Pydantic íŒŒë¼ë¯¸í„° ëª¨ë¸
â”‚       â”œâ”€â”€ testcase_tools.py    # í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ê²€ìƒ‰ ë„êµ¬
â”‚       â”œâ”€â”€ search_tools.py      # íŒŒì¼/ì½”ë“œ ê²€ìƒ‰ ë„êµ¬
â”‚       â”œâ”€â”€ code_generation_tools.py  # ì½”ë“œ ìƒì„± ë„êµ¬ (NEW)
â”‚       â””â”€â”€ validation_tools.py  # ê²€ì¦ ë„êµ¬ (NEW)
â”‚
â”œâ”€â”€ testcase_rag/                # VectorStore
â”‚   â””â”€â”€ testcase_vectordb/       # ChromaDB ë°ì´í„°
â”‚
â”œâ”€â”€ checkpoints/                 # SQLite ì²´í¬í¬ì¸íŠ¸
â”‚   â””â”€â”€ checkpoints.db
â”‚
â””â”€â”€ .env                         # í™˜ê²½ ë³€ìˆ˜
```

---

## ì‚¬ìš© ì˜ˆì‹œ

### ì˜ˆì‹œ 1: í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ê²€ìƒ‰ ë° ë©”ì„œë“œ ìƒì„±

```python
# ì‚¬ìš©ì ì¿¼ë¦¬
"COMMONR-30 ìŠ¤í… 4ë²ˆ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì°¾ì•„ì„œ test ë©”ì„œë“œ ë§Œë“¤ì–´ì¤˜"

# ì‹¤í–‰ íë¦„
1. Supervisor Agent â†’ "testcase" ë„ë©”ì¸ ì„ íƒ
2. TestCase Supervisor â†’ testcase_search_agent ì‹¤í–‰
   â†’ "COMMONR-30 step 4" ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜
3. TestCase Supervisor â†’ testcase_create_method_agent ì‹¤í–‰
   â†’ test_COMMONR_30_step_4() ë©”ì„œë“œ ìƒì„±
4. TestCase Supervisor â†’ testcase_method_evaluator ì‹¤í–‰
   â†’ ì½”ë“œ í’ˆì§ˆ ê²€ì¦ âœ…
5. Supervisor Agent â†’ ìµœì¢… ê²°ê³¼ í†µí•© ë° ì‚¬ìš©ì ì‘ë‹µ
```

### ì˜ˆì‹œ 2: íŒŒì¼ ê²€ìƒ‰ ë° ë¶„ì„

```python
# ì‚¬ìš©ì ì¿¼ë¦¬
"demo/test í´ë”ì—ì„œ COMMONR ê´€ë ¨ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì°¾ì•„ì¤˜"

# ì‹¤í–‰ íë¦„
1. Supervisor Agent â†’ "resource" ë„ë©”ì¸ ì„ íƒ
2. Resource Supervisor â†’ finder_agent ì‹¤í–‰
   â†’ glob(pattern="*COMMONR*.py", path="demo/test")
3. Resource Supervisor â†’ searcher_agent ì‹¤í–‰
   â†’ íŒŒì¼ ë‚´ìš© ë¶„ì„
4. Resource Supervisor â†’ evaluator_agent ì‹¤í–‰
   â†’ ê´€ë ¨ì„± í‰ê°€ âœ…
5. Supervisor Agent â†’ ìµœì¢… ê²°ê³¼ ë°˜í™˜
```

### ì˜ˆì‹œ 3: ë³µí•© ì‘ì—…

```python
# ì‚¬ìš©ì ì¿¼ë¦¬
"COMMONR-30 ì „ì²´ ìŠ¤í… í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì°¾ì•„ì„œ demo/test/testCOMMONR_XX_Y.py íŒŒì¼ ë§Œë“¤ì–´ì¤˜"

# ì‹¤í–‰ íë¦„
1. Supervisor Agent â†’ "testcase" + "resource" ë³µí•© ì‘ì—… íŒë‹¨
2. TestCase Supervisor ì‹¤í–‰
   â†’ ëª¨ë“  ìŠ¤í… ê²€ìƒ‰ (query_type="multiple")
   â†’ ê° ìŠ¤í…ë³„ ë©”ì„œë“œ ìƒì„±
3. Resource Supervisor ì‹¤í–‰
   â†’ ê¸°ì¡´ íŒŒì¼ êµ¬ì¡° ë¶„ì„
   â†’ ìƒˆ íŒŒì¼ í…œí”Œë¦¿ ìƒì„±
4. Supervisor Agent â†’ ê²°ê³¼ í†µí•© ë° íŒŒì¼ ìƒì„±
```

---

## ì„±ëŠ¥ ë° íŠ¹ì§•

### ì•„í‚¤í…ì²˜ ê°œì„ 
- **ëª¨ë“ˆí™”**: ë„ë©”ì¸ë³„ ë…ë¦½ì ì¸ ëª¨ë“ˆ êµ¬ì¡°
- **í™•ì¥ì„±**: ìƒˆ ë„ë©”ì¸ ì¶”ê°€ ìš©ì´ (Domain Supervisor + Worker Agents)
- **ì¬ì‚¬ìš©ì„±**: Worker AgentëŠ” ì—¬ëŸ¬ Domain Supervisorì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥
- **ìœ ì§€ë³´ìˆ˜ì„±**: ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•íˆ ë¶„ë¦¬

### ê²€ì¦ ë©”ì»¤ë‹ˆì¦˜
- âœ… ë‹¨ê³„ë³„ í‰ê°€ë¡œ í’ˆì§ˆ ë³´ì¥
- âœ… ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ ë˜ëŠ” ëŒ€ì•ˆ ì „ëµ
- âœ… íƒ€ì… ì•ˆì „ (Pydantic ëª¨ë¸)
- âœ… ì²´í¬í¬ì¸íŠ¸ ê¸°ë°˜ ë³µêµ¬

---

## ì°¸ê³  ìë£Œ

- **ìƒì„¸ ì•„í‚¤í…ì²˜**: [ARCHITECTURE.md](ARCHITECTURE.md)
- **LangGraph ê³µì‹ ë¬¸ì„œ**: https://langchain-ai.github.io/langgraph/
- **ReAct ë…¼ë¬¸**: https://arxiv.org/abs/2210.03629
- **create_react_agent**: https://langchain-ai.github.io/langgraph/how-tos/create-react-agent/

---

## ë²„ì „ íˆìŠ¤í† ë¦¬

- **v3.0**: Hierarchical Multi-Agent System (í˜„ì¬)
  - 3ë‹¨ê³„ ê³„ì¸µ êµ¬ì¡° ë„ì…
  - ë„ë©”ì¸ë³„ Supervisor Agent ë¶„ë¦¬
  - Worker AgentëŠ” create_react_agent ì‚¬ìš©

- **v2.0**: Single ReAct Agent
  - Supervisor-Planner-Executor ì œê±°
  - ë‹¨ì¼ ReAct ì—ì´ì „íŠ¸ë¡œ ë‹¨ìˆœí™”

- **v1.0**: Supervisor-Planner-Executor
  - ì´ˆê¸° ë©€í‹° ì—ì´ì „íŠ¸ êµ¬ì¡°

---

## ë¼ì´ì„ ìŠ¤

MIT License

---

**Made with â¤ï¸ by QE Team**
